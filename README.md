# Asymetry_check


### Background
After the input data has been validated and normalized, derived data can be generated by executing formula-based
aggregations.

### Install

####  pip install -r requirements.txt
run command above to install all requirements needed for this project

### Description

#### Part 1 - Retrieving transaction data
Transaction data can be retrieved from the REST API of the European Central Bank, using the URL below:

https://sdw-wsrest.ecb.europa.eu/service/data/BP6/Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N?detail=dataonly


In the URL above, Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N is a transaction identifier and can be
replaced with any other (valid) identifier.

##### Response, in XML format, contains multiple children of the following format:

    <generic:Obs>
    <generic:ObsDimension value="1999-Q1"/>
    <generic:ObsValue value="55420.1818623299"/>
    </generic:Obs>
    
NOTE: Each of these represents the transaction amount at a certain point in time.

def get_transactions(identifier: str) -> pd.DataFrame

Function should fetch the transaction data from the appropriate URL and convert it to a pandas DataFrame, with
columns IDENTIFIER, TIME_PERIOD and OBS_VALUE, corresponding to values of the identifier parameter,
generic:ObsDimension tag and generic:ObsValue tag from the XML. OBS_VALUE should be converted to
float

#### Running: get_transactions("Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N") should produce thefollowing:

    IDENTIFIER                                TIME_PERIOD OBS_VALUE
    Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N 1999-Q1     5420.181862
    Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N 1999-Q2     87003.970961


#### Part 2 - Retrieving data for the formula
 
An aggregation formula is given as an assignment expression involving transaction identifiers. For example:

    Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N =
    Q.N.I8.W1.S1P.S1.T.A.FA.D.F._Z.EUR._T._X.N +
    Q.N.I8.W1.S1Q.S1.T.A.FA.D.F._Z.EUR._T._X.N

is a valid formula. For simplicity, expression to the right of = will only include addition (+) and substraction (-)
operators. While there is a guarantee that the left-hand side of the = operator will contain only one identifier, number
of identifiers on the right-hand side is not fixed.

##### def get_formula_data(formula: str) -> DataFrame

    The function should parse the formula and fetch the data (using the function from part #1) for the identifiers on the
    right-hand side of the = operator.
    Resulting DataFrame should use TIME_PERIOD column as the index, and have as many columns as there are
    identifiers, each containing values of the OBS_VALUE column from the appropriate DataFrame. Names of the
    columns are the names of the identifiers, in the order they appear in the formula.
    In case some identifier have data for a TIME_PERIOD, but others don't, fill the blanks with 0.


#### Running: get_formula_data("Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N =
Q.N.I8.W1.S1P.S1.T.A.FA.D.F._Z.EUR._T._X.N +
Q.N.I8.W1.S1Q.S1.T.A.FA.D.F._Z.EUR._T._X.N") should produce the following:

    TIME_PERIOD Q.N.I8.W1.S1P.S1.T.A.FA.D.F._Z.EUR._T._X.N Q.N.I8.W1.S1Q.S1.T.A.FA.D.F._Z.EUR._T._X.N
    2008-Q1                                  158849.702543                              158813.745366
    2008-Q2                                  55136.8131911                              55317.0603681


#### Part 3 - Computing the aggregates

##### function def compute_aggregates(formula: str) -> pd.DataFrame

The function should load the data using the function from part #2 and return a DataFrame, indexed by
TIME_PERIOD, with a single column, whose name is the identifier on the left-hand side of the = operator. Values of
this column are obtained by applying the appropriate operations, as indicated by the formula, on the retrieved data.

Running:
compute_aggregates("Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N =
Q.N.I8.W1.S1P.S1.T.A.FA.D.F._Z.EUR._T._X.N +
Q.N.I8.W1.S1Q.S1.T.A.FA.D.F._Z.EUR._T._X.N")
should produce the following:

    TIME_PERIOD Q.N.I8.W1.S1.S1.T.A.FA.D.F._Z.EUR._T._X.N
    2008-Q1                                 317663.447909
    2008-Q2                                 110453.873559
    
    
NOTE: Values above are obtained by summing up the values (as indicated by the formula) of the DataFrame in part
#2.
